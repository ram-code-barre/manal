<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="theme-color" content="#C40434">
    <link rel="manifest" href="manifest.webmanifest">
    <title>Aviation Warehouse Management System</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
    <!-- ZXing for real barcode scanning (mobile friendly) -->
    <script src="https://unpkg.com/@zxing/library@0.20.0"></script>
    <!-- SheetJS for Excel (XLSX) export -->
    <script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
    <!-- QRCode generator -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <!-- MSAL for Microsoft Graph authentication (OneDrive/SharePoint upload) -->
    <script src="https://alcdn.msauth.net/browser/2.38.0/js/msal-browser.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="container">
                <h1>Aviation Warehouse Management System</h1>
                <div class="header-stats">
                    <div class="stat-item">
                        <span class="stat-value" id="total-materials">0</span>
                        <span class="stat-label">Materials</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="total-racks">0</span>
                        <span class="stat-label">Racks</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="total-placements">0</span>
                        <span class="stat-label">Placements</span>
                    </div>
                </div>
                <div class="global-search" style="margin-top: 12px; max-width: 520px;">
                    <input type="text" class="form-control" id="global-search-input" placeholder="Search all: materials, racks, placements‚Ä¶ (press Enter)" onkeydown="globalSearchEnter(event)">
                </div>
            </div>
        </header>

        

        <!-- Main Dashboard -->
        <main class="main-content">
            <div class="container">
                <!-- Navigation Tabs -->
                <nav class="tab-nav">
                    <button class="tab-button active" data-tab="dashboard">Dashboard</button>
                    <button class="tab-button" data-tab="reception">Reception</button>
                    <button class="tab-button" data-tab="rayonnage">Rayonnage</button>
                    <button class="tab-button" data-tab="placement">Placement</button>
                    <button class="tab-button" data-tab="data">Data Management</button>
                </nav>

                <!-- Dashboard Tab -->
                <div id="dashboard" class="tab-content active">
                    <h2>Dashboard</h2>
                    <div class="dashboard-grid">
                        <div class="dashboard-card" data-tab="reception">
                            <div class="card-icon">üì¶</div>
                            <h3>Reception</h3>
                            <p>Register new materials and generate barcodes</p>
                            <div class="card-stats">
                                <span id="dashboard-materials">0</span> materials registered
                            </div>
                        </div>
                        <div class="dashboard-card" data-tab="rayonnage">
                            <div class="card-icon">üè≠</div>
                            <h3>Rayonnage Management</h3>
                            <p>Create and manage rack locations</p>
                            <div class="card-stats">
                                <span id="dashboard-racks">0</span> rack locations
                            </div>
                        </div>
                        <div class="dashboard-card" data-tab="placement">
                            <div class="card-icon">üìç</div>
                            <h3>Placement</h3>
                            <p>Place materials in rack locations</p>
                            <div class="card-stats">
                                <span id="dashboard-placements">0</span> placements made
                            </div>
                        </div>
                        <div class="dashboard-card" data-tab="data">
                            <div class="card-icon">üìä</div>
                            <h3>Data Management</h3>
                            <p>Export, import and manage data</p>
                            <div class="card-stats">
                                Export to Google Sheets
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reception Tab -->
                <div id="reception" class="tab-content">
                    <h2>Material Reception</h2>
                    <div class="module-container">
                        <div class="form-section">
                            <form id="material-form" class="material-form">
                                <div class="form-group">
                                    <label class="form-label" for="part-number">Part Number (P/N) *</label>
                                    <input type="text" id="part-number" name="part-number" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="serial-number">Serial Number (S/N) *</label>
                                    <input type="text" id="serial-number" name="serial-number" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="material-type">Material Type</label>
                                    <select id="material-type" name="material-type" class="form-control">
                                        <option value="Electronic">Electronic</option>
                                        <option value="Mechanical">Mechanical</option>
                                        <option value="Hydraulic">Hydraulic</option>
                                        <option value="Structural">Structural</option>
                                        <option value="Avionics">Avionics</option>
                                        <option value="Engine">Engine</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="description">Description</label>
                                    <textarea id="description" name="description" class="form-control" rows="3"></textarea>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="supplier">Supplier</label>
                                    <input type="text" id="supplier" name="supplier" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="reception-matricule">Magasinier Matricule</label>
                                    <input type="text" id="reception-matricule" name="reception-matricule" class="form-control" placeholder="Enter employee ID" autocomplete="off">
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="date-received">Date Received</label>
                                    <input type="date" id="date-received" name="date-received" class="form-control">
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="btn btn--primary">Generate Material Barcode</button>
                                    <button type="button" class="btn btn--secondary" onclick="openBulkReceptionModal()">Bulk Reception</button>
                                    <button type="button" class="btn btn--secondary" onclick="clearForm('material-form')">Clear Form</button>
                                </div>
                            </form>
                        </div>
                        <div class="barcode-section" id="material-barcode-section" style="display: none;">
                            <h3>Generated Material Barcode</h3>
                            <div class="barcode-container">
                                <div class="barcode-wrapper">
                                    <div class="barcode-label">Barcode</div>
                                    <canvas id="material-barcode"></canvas>
                                </div>
                                <div class="qr-container">
                                    <div class="barcode-label">QR Code</div>
                                    <div id="material-qrcode"></div>
                                </div>
                            </div>
                            <div class="barcode-info" id="material-barcode-info"></div>
                            <div class="barcode-actions">
                                <button class="btn btn--primary" onclick="printBarcode('material-barcode')" id="print-material-btn">
                                    <span class="btn-text">üñ®Ô∏è Print Label</span>
                                    <span class="barcode-loading" style="display: none;"></span>
                                </button>
                                <button class="btn btn--secondary" onclick="downloadCertificate()" id="download-material-btn">
                                    <span class="btn-text">üìÑ Download Certificate</span>
                                    <span class="barcode-loading" style="display: none;"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="materials-list">
                        <div class="search-section">
                            <h3>Materials</h3>
                            <div class="search-controls">
                                <input type="text" id="materials-search" class="form-control" placeholder="Search materials..." onkeyup="warehouseManager.setSearchFilter('materials', this.value)">
                                <button class="btn btn--secondary" onclick="document.getElementById('materials-search').value=''; warehouseManager.setSearchFilter('materials', '');">Clear</button>
                            </div>
                        </div>
                        <div id="materials-display"></div>
                    </div>
                </div>

                <!-- Rayonnage Tab -->
                <div id="rayonnage" class="tab-content">
                    <h2>Rayonnage Management</h2>
                    <div class="info-notice" style="background: #e3f2fd; border: 1px solid #2196f3; padding: 10px; margin-bottom: 20px; border-radius: 4px;">
                        <strong>New Rack Format:</strong> R1C1 (Zone R + Row 1-26 + Column A-Z + Sub-Level 1-10)<br>
                        <small>Examples: R1A1, R5B3, R12Z10</small>
                    </div>
                    <div class="module-container">
                        <div class="form-section">
                            <form id="rack-form" class="rack-form">
                                <div class="form-group">
                                    <label class="form-label" for="zone">Zone</label>
                                    <input type="text" id="zone" name="zone" class="form-control" value="R" readonly>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="row">Row (1-26)</label>
                                    <select id="row" name="row" class="form-control">
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                        <option value="6">6</option>
                                        <option value="7">7</option>
                                        <option value="8">8</option>
                                        <option value="9">9</option>
                                        <option value="10">10</option>
                                        <option value="11">11</option>
                                        <option value="12">12</option>
                                        <option value="13">13</option>
                                        <option value="14">14</option>
                                        <option value="15">15</option>
                                        <option value="16">16</option>
                                        <option value="17">17</option>
                                        <option value="18">18</option>
                                        <option value="19">19</option>
                                        <option value="20">20</option>
                                        <option value="21">21</option>
                                        <option value="22">22</option>
                                        <option value="23">23</option>
                                        <option value="24">24</option>
                                        <option value="25">25</option>
                                        <option value="26">26</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="level">Column (A-Z)</label>
                                    <select id="level" name="level" class="form-control">
                                        <option value="A">A</option>
                                        <option value="B">B</option>
                                        <option value="C">C</option>
                                        <option value="D">D</option>
                                        <option value="E">E</option>
                                        <option value="F">F</option>
                                        <option value="G">G</option>
                                        <option value="H">H</option>
                                        <option value="I">I</option>
                                        <option value="J">J</option>
                                        <option value="K">K</option>
                                        <option value="L">L</option>
                                        <option value="M">M</option>
                                        <option value="N">N</option>
                                        <option value="O">O</option>
                                        <option value="P">P</option>
                                        <option value="Q">Q</option>
                                        <option value="R">R</option>
                                        <option value="S">S</option>
                                        <option value="T">T</option>
                                        <option value="U">U</option>
                                        <option value="V">V</option>
                                        <option value="W">W</option>
                                        <option value="X">X</option>
                                        <option value="Y">Y</option>
                                        <option value="Z">Z</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="sublevel">Sub-Level (1-10)</label>
                                    <select id="sublevel" name="sublevel" class="form-control">
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                        <option value="6">6</option>
                                        <option value="7">7</option>
                                        <option value="8">8</option>
                                        <option value="9">9</option>
                                        <option value="10">10</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="rack-description">Description</label>
                                    <textarea id="rack-description" name="rack-description" class="form-control" rows="2"></textarea>
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="btn btn--primary">Generate Rack Barcode</button>
                                    <button type="button" class="btn btn--secondary" onclick="clearForm('rack-form')">Clear Form</button>
                                    <button type="button" class="btn btn--outline" onclick="promptRackCapacity()">Set Capacity Note</button>
                                </div>
                            </form>
                        </div>
                        <div class="barcode-section" id="rack-barcode-section" style="display: none;">
                            <h3>Generated Rack Barcode</h3>
                            <div class="barcode-container">
                                <div class="barcode-wrapper">
                                    <div class="barcode-label">Barcode</div>
                                    <canvas id="rack-barcode"></canvas>
                                </div>
                                <div class="qr-container">
                                    <div class="barcode-label">QR Code</div>
                                    <div id="rack-qrcode"></div>
                                </div>
                            </div>
                            <div class="barcode-info" id="rack-barcode-info"></div>
                            <div class="barcode-actions">
                                <button class="btn btn--primary" onclick="printBarcode('rack-barcode')" id="print-rack-btn">
                                    <span class="btn-text">üñ®Ô∏è Print Label</span>
                                    <span class="barcode-loading" style="display: none;"></span>
                                </button>
                                <button class="btn btn--secondary" onclick="downloadRackLabel('rack-barcode')" id="download-rack-btn">
                                    <span class="btn-text">üì• Download</span>
                                    <span class="barcode-loading" style="display: none;"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="racks-list">
                        <div class="search-section">
                            <h3>Rack Locations</h3>
                            <div class="search-controls">
                                <input type="text" id="racks-search" class="form-control" placeholder="Search racks..." onkeyup="warehouseManager.setSearchFilter('racks', this.value)">
                                <button class="btn btn--secondary" onclick="document.getElementById('racks-search').value=''; warehouseManager.setSearchFilter('racks', '');">Clear</button>
                            </div>
                        </div>
                        <div id="racks-display"></div>
                    </div>
                </div>

                <!-- Placement Tab -->
                <div id="placement" class="tab-content">
                    <h2>Material Placement</h2>
                    <div class="placement-workflow">
                        <div class="step-indicator">
                            <div class="step active" id="step-1-indicator">
                                <span class="step-number">1</span>
                                <span class="step-label">Scan Material</span>
                            </div>
                            <div class="step" id="step-2-indicator">
                                <span class="step-number">2</span>
                                <span class="step-label">Scan Rack</span>
                            </div>
                            <div class="step" id="step-3-indicator">
                                <span class="step-number">3</span>
                                <span class="step-label">Confirm</span>
                            </div>
                        </div>
                        
                        <div class="placement-step active" id="placement-step-1">
                            <h3>Step 1: Scan/Enter Material Barcode</h3>
                            <div class="form-group">
                                <label class="form-label" for="material-barcode-input">Material Barcode</label>
                                <div class="barcode-input-container">
                                    <input type="text" id="material-barcode-input" name="material-barcode-input" class="form-control" placeholder="Scan or enter material barcode">
                                    <button class="btn btn--secondary camera-btn" onclick="openBarcodeScanner('material')" title="Open Camera Scanner">
                                        üì∑
                                    </button>
                                </div>
                            </div>
                            <button class="btn btn--primary" onclick="processMaterialBarcode()">Continue</button>
                        </div>

                        <div class="placement-step" id="placement-step-2">
                            <h3>Step 2: Scan/Enter Rack Barcode</h3>
                            <div class="selected-material" id="selected-material-display"></div>
                            <div class="form-group">
                                <label class="form-label" for="rack-barcode-input">Rack Barcode</label>
                                <div class="barcode-input-container">
                                    <input type="text" id="rack-barcode-input" name="rack-barcode-input" class="form-control" placeholder="Scan or enter rack barcode">
                                    <button class="btn btn--secondary camera-btn" onclick="openBarcodeScanner('rack')" title="Open Camera Scanner">
                                        üì∑
                                    </button>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button class="btn btn--primary" onclick="processRackBarcode()">Continue</button>
                                <button class="btn btn--secondary" onclick="resetPlacement()">Start Over</button>
                            </div>
                        </div>

                        <div class="placement-step" id="placement-step-3">
                            <h3>Step 3: Confirm Placement</h3>
                            <div class="placement-confirmation" id="placement-confirmation"></div>
            <div class="form-group">
                <label class="form-label" for="magasinier-matricule">Magasinier Matricule</label>
                <input type="text" id="magasinier-matricule" name="magasinier-matricule" class="form-control" placeholder="Enter your employee ID" autocomplete="off">
                <small class="form-help">Required to confirm placement</small>
            </div>
                            <div class="form-actions">
                                <button class="btn btn--primary" onclick="confirmPlacement()">Confirm Placement</button>
                                <button class="btn btn--secondary" onclick="resetPlacement()">Cancel</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="placements-history">
                        <div class="search-section">
                            <h3>Placements</h3>
                            <div class="search-controls">
                                <input type="text" id="placements-search" class="form-control" placeholder="Search placements..." onkeyup="warehouseManager.setSearchFilter('placements', this.value)">
                                <button class="btn btn--secondary" onclick="document.getElementById('placements-search').value=''; warehouseManager.setSearchFilter('placements', '');">Clear</button>
                                <button class="btn btn--outline" onclick="undoLastPlacement()" title="Remove the most recent placement">Undo last placement</button>
                            </div>
                        </div>
                        <div id="placements-display"></div>
                    </div>
                </div>

                <!-- Data Management Tab -->
                <div id="data" class="tab-content">
                    <h2>Data Management</h2>
                    <div class="data-management">
                        <div class="data-export-section">
                            <h3>Export Data</h3>
                        <div class="export-options">
                            <button class="btn btn--primary" onclick="exportToCSV('materials')">Export Materials to CSV</button>
                            <button class="btn btn--primary" onclick="exportToCSV('racks')">Export Racks to CSV</button>
                            <button class="btn btn--primary" onclick="exportToCSV('placements')">Export Placements to CSV</button>
                            <button class="btn btn--primary" onclick="exportAllData()">Export All Data to JSON</button>
                            <button class="btn btn--primary" onclick="exportToGoogleSheets()">üìä Export to Google Sheets</button>
                            <button class="btn btn--secondary" onclick="exportAllToExcel()">üìó Export All to Excel</button>
                            <button class="btn btn--outline" onclick="updateExistingExcelFile()">üìù Update "excel file.xlsx"</button>
                            <button class="btn btn--outline" onclick="createNewExcelFile()">üÜï Create New Excel File</button>
                        </div>

                            <div class="form-group" style="margin-top:12px;">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="auto-excel-toggle" name="auto-excel-toggle">
                                    <span class="checkmark"></span>
                                    Enable Auto Export to Excel (on changes)
                                </label>
                                <small class="form-help">When enabled, a new Excel file will download automatically after changes (rate-limited).</small>
                            </div>
                        
                        <div class="google-sheets-section">
                            <h4>üîÑ Automatic Google Sheets Integration</h4>
                            
                            <!-- Sync Status Display -->
                            <div class="sync-status-display">
                                <div class="sync-indicator" id="sync-indicator">‚ö™ Not Connected</div>
                                <div class="sync-details">
                                    <span id="sync-status" class="status">Disconnected</span>
                                    <span id="last-sync-time">Never synced</span>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="sheets-url">Google Sheets URL</label>
                                <input type="url" id="sheets-url" name="sheets-url" class="form-control" placeholder="https://docs.google.com/spreadsheets/d/your-sheet-id/edit">
                                <small class="form-help">Paste your Google Sheets URL here for automatic data sync</small>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="web-app-url">Google Apps Script Web App URL (Optional)</label>
                                <input type="url" id="web-app-url" name="web-app-url" class="form-control" placeholder="https://script.google.com/macros/s/your-script-id/exec">
                                <small class="form-help">For advanced automatic sync - see setup guide</small>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="sync-frequency">Automatic Sync Frequency</label>
                                <select id="sync-frequency" name="sync-frequency" class="form-control">
                                    <option value="manual">Manual Only</option>
                                    <option value="realtime">Real-time (Sync on every change)</option>
                                    <option value="minute">Every Minute</option>
                                    <option value="hourly">Every Hour</option>
                                    <option value="daily">Daily</option>
                                </select>
                                <small class="form-help">Choose how often to automatically sync your data</small>
                            </div>
                            
                            <div class="auto-sync-controls">
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="auto-sync-toggle" name="auto-sync-toggle">
                                        <span class="checkmark"></span>
                                        Enable Automatic Sync
                                    </label>
                                    <small class="form-help">When enabled, data will sync automatically based on the frequency above</small>
                                </div>
                            </div>
                            
                            <div class="form-actions">
                                <button class="btn btn--primary" onclick="connectGoogleSheets()">üîó Connect to Google Sheets</button>
                                <button class="btn btn--secondary" onclick="syncWithGoogleSheets()">üîÑ Sync Now</button>
                                <button class="btn btn--outline" onclick="showAutoSyncSetup()">üìñ Setup Guide</button>
                                <button class="btn btn--outline" onclick="uploadExcelToOneDrive()">‚òÅÔ∏è Upload Excel to OneDrive</button>
                            </div>
                            
                            <!-- Sync Statistics -->
                            <div class="sync-stats" id="sync-stats" style="display: none;">
                                <h5>Sync Statistics</h5>
                                <div class="stats-grid">
                                    <div class="stat-item">
                                        <span class="stat-label">Total Syncs</span>
                                        <span class="stat-value" id="total-syncs">0</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">Last Sync</span>
                                        <span class="stat-value" id="last-sync-date">Never</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">Status</span>
                                        <span class="stat-value" id="sync-status-text">Inactive</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="data-import-section">
                            <h3>Import Data</h3>
                            <div class="form-group">
                                <label class="form-label" for="import-file">Select JSON file to import</label>
                                <input type="file" id="import-file" name="import-file" class="form-control" accept=".json">
                            </div>
                            <button class="btn btn--secondary" onclick="importData()">Import Data</button>
                        </div>
                        
                        <div class="data-backup-section">
                            <h3>Backup & Restore</h3>
                            <div class="backup-options">
                                <button class="btn btn--primary" onclick="warehouseManager.createBackup()">Create Backup</button>
                                <p>Create a complete backup of all warehouse data including audit logs.</p>
                            </div>
                        </div>
                        
                        <div class="data-clear-section">
                            <h3>Clear Data</h3>
                            <p>Warning: This will permanently delete all stored data.</p>
                            <button class="btn btn--outline" style="border-color: var(--color-error); color: var(--color-error);" onclick="clearAllData()">Clear All Data</button>
                        </div>
                        
                        <div class="audit-log-section">
                            <h3>Audit Log</h3>
                            <p>Track all system activities and changes.</p>
                            <div id="audit-log-display"></div>
                        </div>
                        
                        <div class="data-tables">
                            <div class="data-table-section">
                                <h3>Materials Data</h3>
                                <div id="materials-table"></div>
                            </div>
                            <div class="data-table-section">
                                <h3>Racks Data</h3>
                                <div id="racks-table"></div>
                            </div>
                            <div class="data-table-section">
                                <h3>Placements Data</h3>
                                <div id="placements-table"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Bulk Reception Modal (reuses scanner modal styles) -->
        <div id="bulk-modal" class="scanner-modal" style="display:none;">
            <div class="scanner-content" style="max-width:720px; width:95%;">
                <h3>Bulk Reception</h3>
                <p style="font-size: 12px; color: var(--color-text-secondary); margin-top: 8px;">
                    Import multiple materials at once by uploading a CSV or pasting JSON/CSV.
                </p>
                <div style="text-align:left; margin-top: 12px;">
                    <label class="form-label" for="bulk-file">Upload CSV</label>
                    <input type="file" id="bulk-file" class="form-control" accept=".csv" />
                    <small class="form-help">CSV headers: partNumber, serialNumber, type, supplier, description, dateReceived, receptionMatricule</small>
                </div>
                <div style="text-align:left; margin-top: 16px;">
                    <label class="form-label" for="bulk-text">Or paste JSON/CSV</label>
                    <textarea id="bulk-text" class="form-control" rows="6" placeholder='Example JSON: [{"partNumber":"PN-1","serialNumber":"SN-1"}]'></textarea>
                </div>
                <div class="scanner-actions">
                    <button class="btn btn--primary" onclick="importBulkReception()">Import</button>
                    <button class="btn btn--secondary" onclick="closeBulkReceptionModal()">Close</button>
                </div>
            </div>
        </div>

        <!-- Notification System -->
        <div id="notification" class="notification hidden">
            <div class="notification-content">
                <span class="notification-message"></span>
                <button class="notification-close" onclick="hideNotification()">√ó</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
      // Register service worker and attach manifest dynamically if missing icons
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('service-worker.js').catch(() => {});
      }
    </script>
</body>
</html>